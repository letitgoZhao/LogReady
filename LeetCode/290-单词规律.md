# 209.单次规律

> [LeetCode题目链接](https://leetcode.cn/problems/word-pattern/?envType=study-plan-v2&envId=top-interview-150)

## istringstream分割字符串+两个哈希表维护双射关系

```cpp
class Solution {
public:
    bool wordPattern(std::string pattern, std::string s) {
        // 根据题目：pattern里的 每个字母<-> 每个非空字符(双射关系)

        // 1. 分割s字符串, 得到vector
        std::vector<std::string> split = splitStringBySpace(s);
        if (split.size() != pattern.size())
            return false;
        // 2. 建立两个哈希表维护双射关系
        std::unordered_map<char, std::string> s2t;
        std::unordered_map<std::string, char> t2s;
        // 3. 同构字符串题目
        for (int i = 0; i < pattern.size(); ++i) {
            char s = pattern[i];
            std::string t = split[i];
            if ((s2t.find(s) != s2t.end() && s2t[s] != t) ||
                (t2s.find(t) != t2s.end() && t2s[t] != s))
                return false;
            // 更新映射关系
            s2t[s] = t;
            t2s[t] = s;
        }

        return true;
    }

private:
    std::vector<std::string> splitStringBySpace(std::string& s) {
        std::vector<std::string> result;
        std::istringstream iss(s);
        std::string world;

        while (iss >> world) {
            result.push_back(world);
        }
        return result;
    }
};
```