# 151. 反转字符串中的单词

> [题目链接](https://leetcode.cn/problems/reverse-words-in-a-string/?envType=study-plan-v2&envId=top-interview-150)

## 初次尝试——反序遍历求字串并拼接
时间复杂度o(n)，空间复杂度o(n)。

```cpp
class Solution {
public:
    string reverseWords(string s) {
        // 采用str.substr(index, length) API
        int len = s.size();
        int sub_len = 0;
        vector<string> str;
        for (int i = len - 1; i >= 0; i--) {
            if (isalnum(s[i])) {
                sub_len++;
            }
            if (sub_len != 0 && !isalnum(s[i])) {
                str.push_back(s.substr(i + 1, sub_len));
                sub_len = 0;
            }
            if (i == 0 && isalnum(s[i])) {
                str.push_back(s.substr(0, sub_len));
                sub_len = 0;
            }
        }
        string answer = "";
        for (int i = 0; i < str.size(); ++i) {
            answer += str[i];
            if (i != str.size() - 1)
                answer += " ";
        }
        return answer;
    }
};

```

## 优化改进算法
时间复杂度o(n)，空间复杂度o(1)。

```cpp
class Solution {
public:
    string reverseWords(string s) {
        // 采用str.substr(index, length) API
        int len = s.size();
        int sub_len = 0;
        string answer = "";
        bool flag1 = false;
        for (int i = len - 1; i >= 0; i--) {
            // 迭代记数
            if (isalnum(s[i])) {
                sub_len++;
            }
            // 处理拼接字符
            if (sub_len != 0 && !isalnum(s[i])) {
                answer += s.substr(i + 1, sub_len);
                flag1 = true;
                sub_len = 0;
            } else if (i == 0 && isalnum(s[i])) {
                answer += s.substr(0, sub_len);
                sub_len = 0;
                flag1 = true;
            }
            // 处理是否尾加" "
            if (flag1 && exitsWords(s, i - 1)) {
                answer += " ";
                flag1 = false;
            }
        }
        return answer;
    }

private:
    bool exitsWords(string& s, int cur_index) {
        for (int i = cur_index; i >= 0; i--) {
            if (isalnum(s[i]))
                return true;
        }
        return false;
    }
};
```