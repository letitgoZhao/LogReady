# 70. 爬楼梯

> [题目链接](https://leetcode.cn/problems/climbing-stairs/?envType=study-plan-v2&envId=top-interview-150)

## 动态规划

f(x)表示爬到第x级台阶的方案数, 则`f(x) = f(x - 1) + f(x - 2)`。
采用了`滚动数组`的思想，将空间复杂度优化到了o(1)。

```cpp
class Solution {
public:
    int climbStairs(int n) {
        // f(x)表示爬到第x级台阶的方案数, 则f(x) = f(x - 1) + f(x - 2);
        // [0, 1, 2]: f(2) = f(1) + f(0) = 1 + 1 = 2, 规定f(0) = 1;
        // [1, 2, 3]: f(3) = f(1) + f(2) = 1 + 2 = 3; 
        // [2, 3, 4]: f(4) = f(2) + f(3) = 2 + 3 = 5; 
        // ......
        // [n - 2, n - 1, n]: f(n) = f(n - 2) + f(n - 1);
        // 滚动执行n - 1次, 这里相当于[-1, 0, 1] -> f(1) = 1, 因而n次
        int p = 0, q = 0, r = 1;
        for (int i = 0; i < n; ++i) {
            p = q;
            q = r;
            r  = p + q;
        }
        return r;
    }
};
```

### 动态规划——递推公式

1. 采取递归方式（超出时间限制）。
```cpp
class Solution {
public:
    int climbStairs(int n) {
        if (n == 0  || n == 1)
            return 1;
        int n_1 = climbStairs(n - 1);
        int n_2 = climbStairs(n - 2);
        return n_1 + n_2;
    }
};
```


2. 采取迭代的方式（正常通过）。
```cpp
class Solution {
public:
    int climbStairs(int n) {
        // n = 0, 1, 指定边界条件
        // n = 1, 1
        // n = 2, 1 + 1 = 2
        // f(n) = f(n - 1) + f(n - 2)
        vector<int> dp(n + 1, 0);
        dp[0] = 1, dp[1] = 1;
        for (int i = 2; i <= n; i++) {
            dp[i] = dp[i - 1] + dp[i - 2];
        }
        return dp[n];
    }
};
```

## 差分方程的通项公式

爬楼梯满足的状态方程为：`f(n) = f(n - 1) + f(n - 2)`, 且边界条件为`f(0) = 1, f(1) = 1`。

特征方程形式为：
$$
x^2=x+1
$$
通解的形式为：
$$
f(n)=c_1x_1^n + c_2x_2^n
$$
带入初值条件可得到结果。

```cpp
class Solution {
public:
    int climbStairs(int n) {
        double sqrt_5 = std::sqrt(5);
        // why is n plus 1 ?
        // f(0) -> f(1) -> f(2) -> f(n)
        // f(2) = c_1x_1^1 + c_2x_2^n, n = 1
        // 以此类推即可
        double val =
            pow((1 + sqrt_5) / 2, n + 1) - pow((1 - sqrt_5) / 2, n + 1);
        return (int)round(val / sqrt_5);
    }
};
```