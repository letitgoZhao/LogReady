# 74. 搜索二维矩阵

> [题目链接](https://leetcode.cn/problems/search-a-2d-matrix/description/?envType=study-plan-v2&envId=top-interview-150)


## 一次二分查找
若将矩阵每一行拼接在上一行的末尾，则会得到一个升序数组，我们可以在该数组上二分找到目标元素。

代码实现时，可以二分升序数组的下标，将其映射到原矩阵的行和列上。
```cpp
class Solution {
public:
    bool searchMatrix(vector<vector<int>>& matrix, int target) {
        int m = matrix.size(), n = matrix[0].size();
        int low = 0, high = m * n - 1;
        // 形式上组成一个升序的数组, 一次二分查找
        while (low <= high) {
            int mid = (high - low) / 2 + low;
            // 关键代码, 找到矩阵的中间值元素
            int x = matrix[mid / n][mid % n];
            if (x < target) {
                low = mid + 1;
            } else if (x > target) {
                high = mid - 1;
            } else {
                // 找到了
                return true;
            }
        }
        // 始终找不到
        return false;
    }
};
```

## 两次二分查找
时间复杂度`o(lgmn)`, 空间复杂度`o(1)`。
```cpp
class Solution {
public:
    bool searchMatrix(vector<vector<int>>& matrix, int target) {
        int m = matrix.size(), n = matrix[0].size();
        // 先检索第一列, 定位 'target所在的行'
        int left = 0, right = m - 1;
        int row = 0;
        while (left <= right) {
            int mid = (right - left) / 2 + left;
            int cur = matrix[mid][0];
            if (cur > target) {
                // 一定在前一行
                right = mid - 1;
            } else if (cur < target) {
                // 可能在mid行或者mid+1行, 关键代码
                row = mid;
                left = mid + 1;
            } else {
                // 找到了, matrix[mid][0]为所找元素
                return true;
            }
        }

        // 定位到检索的行, 查看能否检索到元素
        left = 0, right = n - 1;
        while (left <= right) {
            int mid = (right - left) / 2 + left;
            int cur = matrix[row][mid];
            if (cur == target)
                return true;
            else if (cur > target)
                right = mid - 1;
            else
                left = mid + 1;
        }
        // 始终检索不到
        return false;
    }
};
```