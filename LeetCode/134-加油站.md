# 134. 加油站

> [题目链接](https://leetcode.cn/problems/gas-station/description/?envType=study-plan-v2&envId=top-interview-150)


## 模拟遍历过程
- 从上面的推导中，能够得出结论：从 x,y 之间的任何一个加油站出发，都无法到达加油站 y 的下一个加油站。

- 在发现了这一个性质后，算法就很清楚了：我们首先检查第 0 个加油站，并试图判断能否环绕一周；如果不能，就从第一个无法到达的加油站开始继续检查。

```cpp
class Solution {
public:
    int canCompleteCircuit(vector<int>& gas, vector<int>& cost) {
        // 性质: 从x、y之间的任何一个加油站z出发,
        // 都无法到达加油站y的下一个加油站 利用上述性质来优化算法
        int n = gas.size(), ans = 0;
        int cur_sum = 0, total_sum = 0;

        // 一次遍历, 因为需要验证sum_gas - sum_cost, 同时需要动态调整ans_index
        for (int i = 0; i < n; ++i) {
            // 每经过一站就加油, 确保能跑的远一些
            cur_sum += gas[i] -cost[i];
            total_sum += gas[i] - cost[i];
            
            // start_index -> end_index的下一个无法到达
            // 根据上述性质可知, [start_index, end_index]均无法到达
            if (cur_sum < 0) {
                // 重新开始, 下一个'最小可能'
                ans = i + 1;
                cur_sum = 0;
            }
        }
        return (total_sum < 0) ? -1 : ans;
    }
};
```