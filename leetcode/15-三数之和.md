# 15. 三数之和

> [题目链接](https://leetcode.cn/problems/3sum/?envType=study-plan-v2&envId=top-interview-150)

## 排序算法+去除重复元素+两数之和

```cpp
class Solution {
public:
    vector<vector<int>> threeSum(vector<int>& nums) {
        // 存放三元组列表
        vector<vector<int>> ans;
        // 排序-模式识别, 保证不重复操作
        std::sort(nums.begin(), nums.end());

        for (int first = 0; first < nums.size() - 2; ++first) {
            // 跳过重复的元素
            if (first > 0 && nums[first] == nums[first - 1])
                continue;
            /* 一些极端情况的优化 */
            if (nums[first] + nums[first + 1] + nums[first + 2] > 0)
                break; // 后续都不满足
            if (nums[first] + nums[nums.size() - 1] + nums[nums.size() - 2] < 0)
                continue; // 后续内循环无意义

            // left + right = -first满足题意
            int left = first + 1, right = nums.size() - 1;
            while (left < right) {
                // left - 检测重复元素, 第一次不检查
                if (left > first + 1 && nums[left] == nums[left - 1]) {
                    ++left;
                    continue;
                }
                // right - 检测重复元素, 第一次不检查
                if (right < nums.size() - 1 && nums[right] == nums[right + 1]) {
                    --right;
                    continue;
                }

                /* 两数之和 - 有序数组 */
                if (nums[left] + nums[right] + nums[first] > 0)
                    right--; // 不匹配
                else if (nums[left] + nums[right] + nums[first] < 0)
                    left++; // 不匹配
                else if (nums[left] + nums[right] + nums[first] == 0) {
                    ans.push_back({nums[first], nums[left], nums[right]});
                    // 下一次结果迭代
                    left++;
                    right--;
                }
            }
        }

        return ans;
    }
};
```